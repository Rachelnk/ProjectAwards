{% extends "base.html" %}
{% load static %}

{% block content %}
    <div class="container-fluid">
        {% include 'navbar.html' %}
    </div>

    <!-- Project details Page -->           

        <div class="container">
          
            <h1 class ="text-center" style="margin-top: 80px; font-family: 'Alice', serif;">Project Details</h5>
                    
           
          <div class="card" style="margin-top: 50px ;">
            <div class="view overlay" >
              <div class="details-header" style="margin-bottom: 60px ;">
              <h6 class="mb-4 mt-4"> <span style="float:left ;">{{ portfolio.title }} by: <span style="color:red ;"> {{ portfolio.author.username }} </span> </span> 
              </h6>
              <h6>
               <span style="float:right"> {{portfolio.date_created|date}}</span>
              </h6>
            </div>  
               
              
              <img id="img{{portfolio.id}}" src="{{portfolio.portfolio_image.url}}" class="fluid img-thumbnail" alt="portfolio" style="cursor:pointer">
        
            </div>
              <!-- card body -->
            <div class="card-body">
              <h5 class="card-title"><strong>{{portfolio.title|title}}</strong>
                <hr>
                  
              </h5>
                  
             
              <p>{{ portfolio.caption }}</p>
              <hr>

              <div style="margin-bottom: 20px ;">   
                
                <div class="card mt-3">
                  <ul class="list-group list-group-flush">
                      {% if portfolio.portfolio_site_url %}
                      <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                          <h6 class="mb-0"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" width="24" height="24" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><g fill="none" stroke="#171515" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M2 12h20"/><path d="M12 2a15.3 15.3 0 0 1 4 10a15.3 15.3 0 0 1-4 10a15.3 15.3 0 0 1-4-10a15.3 15.3 0 0 1 4-10z"/></g></svg> Website</h6>
                          <a href="{{ portfolio.portfolio_site_url }}" target="_blank">
                              <span class="text-primary"><i class="fa-solid fa-link"></i> Link</span>
                          </a>
                      </li>
                      {% else %}
                      <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                          <h6 class="mb-0"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" width="24" height="24" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><g fill="none" stroke="#171515" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M2 12h20"/><path d="M12 2a15.3 15.3 0 0 1 4 10a15.3 15.3 0 0 1-4 10a15.3 15.3 0 0 1-4-10a15.3 15.3 0 0 1 4-10z"/></g></svg> Website</h6>
                          <a href="#">
                              <span class="text-primary disabled"><i class="fa-solid fa-link"></i> None</span>
                          </a>
                      </li>
                      {% endif %}
                      {% if portfolio.repo_url %}
                      <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                          <h6 class="mb-0"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" width="24" height="24" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><g fill="none" stroke="#171515" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77A5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/></g></svg> Github</h6>
                          <a href="{{ portfolio.repo_url }}" target="_blank">
                              <span class="text-primary"><i class="fa-solid fa-link"></i> Link</span>
                          </a>
                      </li>
                      {% else %}
                      <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                          <h6 class="mb-0"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" width="24" height="24" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><g fill="none" stroke="#171515" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77A5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/></g></svg> Github</h6>
                          <a href="#">
                              <span class="text-primary disabled"><i class="fa-solid fa-link"></i> None</span>
                          </a>
                      </li>
                      {% endif %}
                  </ul>
              </div>                
                
                  <h6> <span style="font-weight: lighter; color: green; margin-bottom: 15px;" class=""> Language: <br> {{ portfolio.programming_language }}</span> </h6>
                
              </div>
              
              <div class="row">
                  <div class="col-md-2"></div>
                    <div class="col-md-8">
                        <div class="d-flex rates-x">
                            <p></p>
                            <div>
                                <div class="ratebox">
                                    <p>{{portfolio.average_design|stringformat:'f'|slice:"0:4"}}</p>
                                </div>
                                <p class="pzxc">design</p>
                            </div>
                            <div>
                                <div class="ratebox">
                                    <p>{{portfolio.average_usability|stringformat:'f'|slice:"0:4"}}</p>
                                </div>
                                <p class="pzxc">usability</p>
                            </div>
                           
                            <div>
                                <div class="ratebox">
                                    <p>{{portfolio.average_creativity|stringformat:'f'|slice:"0:4"}}</p>
                                </div>
                                <p class="pzxc">creativity</p>
                            </div>
                        </div>
                    </div>
                    </div>
                  <div class="col-md-2"></div>
              </div>
              <hr>
              <div class = "row">
                {% if request.user.is_authenticated %}
                <div class="">
                    {% if request.user == portfolio.author.user %}
                    <div class="container">
                        <p><strong>You cannot rate your own project ! </strong><i class="fa fa-walking cnm"></i></p>
                    </div>
                    {% else %}
                    {% if request.user in raters %}
                    <div class="container">
                        <p><strong>You have already rated this project </strong><i class="fa fa-smile-beam cnm"></i></p>
                        {% else %}
                        <button class="btn btn--main btn-center" type="button" data-bs-toggle="modal"
                            data-bs-target="#exampleModal">Rate
                            Project</button>
                        <!-- Modal -->
                        <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="exampleModalLabel">Rate Project</h5>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                                        <form action="" method="post">
                                            {% csrf_token %}
                                            {% for field in form %}
                                            <div class="form__group form__group">
                                                <label for="room_name">{{field.label}}</label>
                                                {{field}}
                                            </div>
                                            {% endfor %}
                
                                            <div class="modal-footer">
                                                <button type="submit" class="btn btn--main">Rate</button>
                                        </form>
                                    </div>
                
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endif %}
                    {% endif %}
                
                </div>
                {% else %}
                <p class="container"><strong class="text-redx">Please login to rate project</strong></p>
                {% endif %}
                

              </div>


  

            

    
    
{% endblock %}